export const LANG_KEY = 'app_lang';
export const LANGUAGES = [
  { code: 'uz', label: 'Oʻzbek' },
  { code: 'ru', label: 'Русский' },
  { code: 'en', label: 'English' },
];

const translations = {
  uz: {
    app: { loading: 'Yuklanmoqda...', telegramOnly: 'Bu ilova faqat Telegram orqali ishlatiladi. Bot orqali kirishingiz kerak.' },
    layout: { appName: 'Bosh sahifa' },
    nav: { home: 'Bosh sahifa', books: 'Kitoblar', news: 'Yangiliklar', profile: 'Profil', category: 'Kategoriya', cart: 'Savat', aria: 'Asosiy menyu' },
    banner: {
      heroTitle: 'Yangi kitoblar sizni kutmoqda',
      heroSub: 'Har kuni o‘qish – har kuni yangi bilim.',
      promoTitle: 'Cheksiz o‘qing',
      promoSub: 'Barcha kategoriyalardan bepul tanlang.',
      newsTitle: 'So‘nggi yangiliklar',
      newsSub: 'Kitobxona yangiliklari va tavsiyalar.',
      ctaBooks: 'Kitoblar',
      ctaRead: 'O‘qishni boshlash',
      ctaMore: 'Batafsil',
    },
    news: {
      title: 'Yangiliklar',
      latest: 'So‘nggi yangiliklar',
      allNews: 'Barcha yangiliklar',
      tagNew: 'Yangi',
      tagEvent: 'Tadbir',
      tagTip: 'Maslahat',
      tagUpdate: 'Yangilanish',
      item1Title: 'Yangi kategoriyalar qo‘shildi',
      item1Excerpt: 'Falsafa, adabiyot va ilm-fan bo‘limlari endi mavjud.',
      item1Date: '14.02.2026',
      item2Title: 'O‘qish haftaligi boshlandi',
      item2Excerpt: 'Har hafta tanlangan kitoblar va mukofotlar.',
      item2Date: '12.02.2026',
      item3Title: 'Uyda qulay o‘qish uchun maslahatlar',
      item3Excerpt: 'Yorug‘lik, vaqt va konzentratsiya bo‘yicha tavsiyalar.',
      item3Date: '10.02.2026',
      item4Title: 'Ilova yangilandi – tezroq va qulayroq',
      item4Excerpt: 'Yangi dizayn va tez yuklanish.',
      item4Date: '08.02.2026',
      item5Title: 'Audiokitoblar bo‘limi tez kunda',
      item5Excerpt: 'Yo‘lda ham tinglash imkoniyati yaqinda.',
      item5Date: '05.02.2026',
    },
    home: {
      heroTitle: 'Yangi kitoblarni kashf eting',
      heroSub: 'Istalgan joyda, istalgan vaqtda o‘qing.',
      continueReading: 'Davom etish',
      popularBooks: 'Kitoblar',
      welcomeHint: 'Kategoriyani tanlang yoki',
      booksLink: 'Kitoblar',
      welcomeHint2: 'bo‘limida barcha kitoblarni ko‘ring.',
      categories: 'Kategoriyalar',
      loading: 'Yuklanmoqda...',
      error: 'Xatolik',
      noCategories: 'Hali kategoriya yoʻq. Admin paneldan qoʻshing.',
      authError: 'Kirish tasdiqlanmadi. Botda «Kitobxonga o\'tish» tugmasini qayta bosing.',
      noContinueReading: 'Hali o‘qish progressi yo‘q. Kitob tanlang.',
    },
    books: {
      title: 'Kitoblar',
      all: 'Barchasi',
      search: 'Qidirish',
      searchPlaceholder: 'Kitob yoki muallif...',
      loading: 'Yuklanmoqda...',
      error: 'Xatolik',
      noBooks: 'Bu boʻlimda hali kitob yoʻq.',
      noResults: 'Hech narsa topilmadi.',
      pages: 'sahifa',
    },
    profile: {
      title: 'Profil',
      settings: 'Sozlamalar',
      language: 'Til',
      login: 'Kirish',
      loginDesc: 'Telegram orqali tasdiqlandi. Maʼlumotlaringiz faqat kitob progressini saqlash uchun ishlatiladi.',
      devMode: 'Dev rejim (lokal test)',
      app: 'Ilova',
      appDesc: 'Kitobxona – PDF kitoblarni o‘qish. Kategoriyalar va kitoblar bosh sahifada va Kitoblar bo‘limida.',
      toHome: 'Bosh sahifaga',
      myAccount: 'Mening hisobim',
      address: 'Manzil',
      offers: 'Takliflar va promolar',
      favorites: 'Sevimlilar',
      orderHistory: 'Buyurtmalar tarixi',
      helpCenter: 'Yordam markazi',
    },
    bookDetail: {
      read: 'O‘qish',
      pages: 'sahifa',
      back: 'Orqaga',
      pageTitle: 'Kitob',
    },
    reader: { pageTitle: 'O‘qish',
      exit: 'Chiqish',
      back: 'Orqaga',
      menuAria: 'Menyu',
      zoomOut: 'Kichiklashtirish',
      zoomIn: 'Kattalashtirish',
      sepia: 'Sepia',
      light: 'Oq',
      dark: 'Qora',
      prevPage: 'Oldingi',
      nextPage: 'Keyingi',
      bookLoading: 'Kitob yuklanmoqda...',
      pdfJsError: 'PDF.js yuklanmadi. Internetingizni tekshiring.',
      pdfError: 'PDF yuklanmadi',
      pageAria: 'Sahifa: chap/o‘ng bosing, suring yoki markazda bosing – panel yashirish',
    },
  },
  ru: {
    app: { loading: 'Загрузка...', telegramOnly: 'Это приложение работает только через Telegram. Войдите через бота.' },
    layout: { appName: 'Главная' },
    nav: { home: 'Главная', books: 'Книги', news: 'Новости', profile: 'Профиль', category: 'Категория', cart: 'Корзина', aria: 'Главное меню' },
    banner: {
      heroTitle: 'Новые книги ждут вас',
      heroSub: 'Читайте каждый день – получайте новые знания.',
      promoTitle: 'Читайте без ограничений',
      promoSub: 'Выбирайте из всех категорий бесплатно.',
      newsTitle: 'Последние новости',
      newsSub: 'Обновления и рекомендации библиотеки.',
      ctaBooks: 'Книги',
      ctaRead: 'Начать чтение',
      ctaMore: 'Подробнее',
    },
    news: {
      title: 'Новости',
      latest: 'Последние новости',
      allNews: 'Все новости',
      tagNew: 'Новое',
      tagEvent: 'Событие',
      tagTip: 'Совет',
      tagUpdate: 'Обновление',
      item1Title: 'Добавлены новые категории',
      item1Excerpt: 'Разделы философии, литературы и науки теперь доступны.',
      item1Date: '14.02.2026',
      item2Title: 'Стартовала неделя чтения',
      item2Excerpt: 'Еженедельные подборки книг и награды.',
      item2Date: '12.02.2026',
      item3Title: 'Советы для комфортного чтения дома',
      item3Excerpt: 'Рекомендации по освещению, времени и концентрации.',
      item3Date: '10.02.2026',
      item4Title: 'Обновление приложения – быстрее и удобнее',
      item4Excerpt: 'Новый дизайн и быстрая загрузка.',
      item4Date: '08.02.2026',
      item5Title: 'Раздел аудиокниг скоро',
      item5Excerpt: 'Возможность слушать в дороге уже скоро.',
      item5Date: '05.02.2026',
    },
    home: {
      heroTitle: 'Откройте новые книги',
      heroSub: 'Читайте где угодно, когда угодно.',
      continueReading: 'Продолжить',
      popularBooks: 'Книги',
      welcomeHint: 'Выберите категорию или',
      booksLink: 'Книги',
      welcomeHint2: 'чтобы увидеть все книги.',
      categories: 'Категории',
      loading: 'Загрузка...',
      error: 'Ошибка',
      noCategories: 'Пока нет категорий. Добавьте в админ-панели.',
      authError: 'Вход не подтверждён. Нажмите «Перейти в библиотеку» в боте снова.',
      noContinueReading: 'Нет прогресса. Выберите книгу.',
    },
    books: {
      title: 'Книги',
      all: 'Все',
      search: 'Поиск',
      searchPlaceholder: 'Книга или автор...',
      loading: 'Загрузка...',
      error: 'Ошибка',
      noBooks: 'В этом разделе пока нет книг.',
      noResults: 'Ничего не найдено.',
      pages: 'стр.',
    },
    profile: {
      title: 'Профиль',
      settings: 'Настройки',
      language: 'Язык',
      login: 'Вход',
      loginDesc: 'Подтверждено через Telegram. Ваши данные используются только для сохранения прогресса чтения.',
      devMode: 'Режим разработки (локальный тест)',
      app: 'Приложение',
      appDesc: 'Библиотека – чтение PDF. Категории и книги на главной и в разделе «Книги».',
      toHome: 'На главную',
      myAccount: 'Мой аккаунт',
      address: 'Адрес',
      offers: 'Предложения и промо',
      favorites: 'Избранное',
      orderHistory: 'История заказов',
      helpCenter: 'Центр помощи',
    },
    bookDetail: {
      read: 'Читать',
      pages: 'стр.',
      back: 'Назад',
      pageTitle: 'Книга',
    },
    reader: { pageTitle: 'Чтение',
      exit: 'Выход',
      back: 'Назад',
      menuAria: 'Меню',
      zoomOut: 'Уменьшить',
      zoomIn: 'Увеличить',
      sepia: 'Сепия',
      light: 'Светлая',
      dark: 'Тёмная',
      prevPage: 'Назад',
      nextPage: 'Вперёд',
      bookLoading: 'Загрузка книги...',
      pdfJsError: 'PDF.js не загрузился. Проверьте интернет.',
      pdfError: 'PDF не загружен',
      pageAria: 'Страница: нажмите влево/вправо, свайп или по центру – скрыть панель',
    },
  },
  en: {
    app: { loading: 'Loading...', telegramOnly: 'This app only works via Telegram. Please open it from the bot.' },
    layout: { appName: 'Home' },
    nav: { home: 'Home', books: 'Books', news: 'News', profile: 'Profile', category: 'Category', cart: 'Cart', aria: 'Main menu' },
    banner: {
      heroTitle: 'New books are waiting for you',
      heroSub: 'Read every day – learn something new.',
      promoTitle: 'Read without limits',
      promoSub: 'Choose from all categories for free.',
      newsTitle: 'Latest news',
      newsSub: 'Library updates and recommendations.',
      ctaBooks: 'Books',
      ctaRead: 'Start reading',
      ctaMore: 'More',
    },
    news: {
      title: 'News',
      latest: 'Latest news',
      allNews: 'All news',
      tagNew: 'New',
      tagEvent: 'Event',
      tagTip: 'Tip',
      tagUpdate: 'Update',
      item1Title: 'New categories added',
      item1Excerpt: 'Philosophy, literature and science sections are now available.',
      item1Date: 'Feb 14, 2026',
      item2Title: 'Reading week has started',
      item2Excerpt: 'Weekly book picks and rewards.',
      item2Date: 'Feb 12, 2026',
      item3Title: 'Tips for comfortable reading at home',
      item3Excerpt: 'Advice on lighting, time and focus.',
      item3Date: 'Feb 10, 2026',
      item4Title: 'App update – faster and easier',
      item4Excerpt: 'New design and quick loading.',
      item4Date: 'Feb 8, 2026',
      item5Title: 'Audiobooks section coming soon',
      item5Excerpt: 'Listen on the go – coming soon.',
      item5Date: 'Feb 5, 2026',
    },
    home: {
      heroTitle: 'Explore new books',
      heroSub: 'Read anytime, anywhere.',
      continueReading: 'Continue Reading',
      popularBooks: 'Books',
      welcomeHint: 'Choose a category or open',
      booksLink: 'Books',
      welcomeHint2: 'to see all books.',
      categories: 'Categories',
      loading: 'Loading...',
      error: 'Error',
      noCategories: 'No categories yet. Add them in the admin panel.',
      authError: 'Sign-in not verified. Tap «Go to library» in the bot again.',
      noContinueReading: 'No progress yet. Pick a book.',
    },
    books: {
      title: 'Books',
      all: 'All',
      search: 'Search',
      searchPlaceholder: 'Book or author...',
      loading: 'Loading...',
      error: 'Error',
      noBooks: 'No books in this section yet.',
      noResults: 'No results found.',
      pages: 'p.',
    },
    profile: {
      title: 'Profile',
      settings: 'Settings',
      language: 'Language',
      login: 'Sign in',
      loginDesc: 'Verified via Telegram. Your data is only used to save reading progress.',
      devMode: 'Dev mode (local test)',
      app: 'App',
      appDesc: 'Library – read PDF books. Categories and books on Home and in Books.',
      toHome: 'To Home',
      myAccount: 'My Account',
      address: 'Address',
      offers: 'Offers & Promos',
      favorites: 'Your Favorites',
      orderHistory: 'Order History',
      helpCenter: 'Help Center',
    },
    bookDetail: {
      read: 'Read',
      pages: 'p.',
      back: 'Back',
      pageTitle: 'Book',
    },
    reader: { pageTitle: 'Reader',
      exit: 'Exit',
      back: 'Back',
      menuAria: 'Menu',
      zoomOut: 'Zoom out',
      zoomIn: 'Zoom in',
      sepia: 'Sepia',
      light: 'Light',
      dark: 'Dark',
      prevPage: 'Prev',
      nextPage: 'Next',
      bookLoading: 'Loading book...',
      pdfJsError: 'PDF.js failed to load. Check your connection.',
      pdfError: 'PDF failed to load',
      pageAria: 'Page: tap left/right, swipe, or center to toggle panel',
    },
  },
};

export function getT(lang) {
  const dict = translations[lang] || translations.uz;
  return (key) => {
    const parts = key.split('.');
    let v = dict;
    for (const p of parts) {
      v = v?.[p];
      if (v === undefined) return key;
    }
    return typeof v === 'string' ? v : key;
  };
}
