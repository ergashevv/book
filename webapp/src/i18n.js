export const LANG_KEY = 'app_lang';
export const LANGUAGES = [
  { code: 'uz', label: 'Oʻzbek' },
  { code: 'ru', label: 'Русский' },
  { code: 'en', label: 'English' },
];

const translations = {
  uz: {
    app: { loading: 'Yuklanmoqda...', telegramOnly: 'Bu ilova faqat Telegram orqali ishlatiladi. Bot orqali kirishingiz kerak.' },
    layout: { appName: 'Bosh sahifa' },
    nav: { home: 'Bosh sahifa', books: 'Kitoblar', library: 'Kutubxona', news: 'Yangiliklar', profile: 'Profil', category: 'Kategoriya', cart: 'Savat', notifications: 'Bildirishnomalar', aria: 'Asosiy menyu' },
    banner: {
      heroTitle: 'Yangi kitoblar sizni kutmoqda',
      heroSub: 'Har kuni o‘qish – har kuni yangi bilim.',
      promoTitle: 'Cheksiz o‘qing',
      promoSub: 'Barcha kategoriyalardan bepul tanlang.',
      newsTitle: 'So‘nggi yangiliklar',
      newsSub: 'Kitobxona yangiliklari va tavsiyalar.',
      ctaBooks: 'Kitoblar',
      ctaRead: 'O‘qishni boshlash',
      ctaMore: 'Batafsil',
    },
    news: {
      title: 'Yangiliklar',
      latest: 'So‘nggi yangiliklar',
      allNews: 'Barcha yangiliklar',
      tagNew: 'Yangi',
      tagEvent: 'Tadbir',
      tagTip: 'Maslahat',
      tagUpdate: 'Yangilanish',
      item1Title: 'Yangi kategoriyalar qo‘shildi',
      item1Excerpt: 'Falsafa, adabiyot va ilm-fan bo‘limlari endi mavjud.',
      item1Date: '14.02.2026',
      item2Title: 'O‘qish haftaligi boshlandi',
      item2Excerpt: 'Har hafta tanlangan kitoblar va mukofotlar.',
      item2Date: '12.02.2026',
      item3Title: 'Uyda qulay o‘qish uchun maslahatlar',
      item3Excerpt: 'Yorug‘lik, vaqt va konzentratsiya bo‘yicha tavsiyalar.',
      item3Date: '10.02.2026',
      item4Title: 'Ilova yangilandi – tezroq va qulayroq',
      item4Excerpt: 'Yangi dizayn va tez yuklanish.',
      item4Date: '08.02.2026',
      item5Title: 'Audiokitoblar bo‘limi tez kunda',
      item5Excerpt: 'Yo‘lda ham tinglash imkoniyati yaqinda.',
      item5Date: '05.02.2026',
    },
    home: {
      heroTitle: 'Yangi kitoblarni kashf eting',
      heroSub: 'Istalgan joyda, istalgan vaqtda o‘qing.',
      continueReading: 'Davom etish',
      resume: 'Davom etish',
      startReading: 'O‘qishni boshlash',
      popularBooks: 'Kitoblar',
      welcomeHint: 'Kategoriyani tanlang yoki',
      booksLink: 'Kitoblar',
      welcomeHint2: 'bo‘limida barcha kitoblarni ko‘ring.',
      categories: 'Kategoriyalar',
      browseCategories: 'Kategoriyalar',
      recommended: 'Tavsiya etiladi',
      loading: 'Yuklanmoqda...',
      error: 'Xatolik',
      noCategories: 'Hali kategoriya yoʻq. Admin paneldan qoʻshing.',
      authError: 'Kirish tasdiqlanmadi. Botda «Kitobxonga o\'tish» tugmasini qayta bosing.',
      noContinueReading: 'Hali o‘qish progressi yo‘q. Kitob tanlang.',
      read: 'o‘qilgan',
      specialOffer: 'Maxsus taklif',
      topOfWeek: 'Haftaning eng yaxshilari',
      bestVendors: 'Eng yaxshi sotuvchilar',
      authors: 'Mualliflar',
      seeAll: 'Barchasi',
      search: 'Qidiruv',
      orderNow: 'Buyurtma berish',
      discount20: 'Chegirma 20%',
    },
    library: {
      sortRecent: 'So‘nggi',
      sortAZ: 'A–Z',
      sortProgress: 'Progress',
      gridView: 'Qator',
      listView: 'Ro‘yxat',
      filterAll: 'Barchasi',
      filterReading: 'O‘qilmoqda',
      filterUnread: 'O‘qilmagan',
      filterRead: 'O‘qilgan',
    },
    books: {
      title: 'Kitoblar',
      all: 'Barchasi',
      search: 'Qidirish',
      searchPlaceholder: 'Kitob yoki muallif...',
      loading: 'Yuklanmoqda...',
      error: 'Xatolik',
      noBooks: 'Bu boʻlimda hali kitob yoʻq.',
      noResults: 'Hech narsa topilmadi.',
      pages: 'sahifa',
      googleBooks: 'Google Books',
      libraryResults: 'Kutubxonada',
      googleResults: 'Google Books da',
      searchingGoogle: 'Google Books qidirilmoqda...',
      noResultsGoogle: 'Google Books da topilmadi.',
      openLibrary: 'Open Library',
      openLibraryResults: 'Open Library da',
      noResultsOpenLibrary: 'Topilmadi.',
      itBookstore: 'IT Bookstore',
      itBookstoreResults: 'IT Bookstore da',
      noResultsItBookstore: 'Topilmadi.',
      isbndb: 'ISBNdb',
      isbndbResults: 'ISBNdb da',
      noResultsIsbndb: 'Topilmadi.',
      isbndbNeedKey: 'API kaliti kerak.',
      hardcover: 'Hardcover',
      hardcoverResults: 'Hardcover da',
      noResultsHardcover: 'Topilmadi.',
      hardcoverNeedKey: 'API kaliti kerak.',
      gutendex: 'Gutendex (Gutenberg)',
      gutendexResults: 'Gutenberg bepul kitoblari',
      noResultsGutendex: 'Topilmadi.',
      viewOnSource: 'Manbada ko\'rish',
    },
    profile: {
      title: 'Profil',
      settings: 'Sozlamalar',
      language: 'Til',
      login: 'Kirish',
      loginDesc: 'Telegram orqali tasdiqlandi. Maʼlumotlaringiz faqat kitob progressini saqlash uchun ishlatiladi.',
      devMode: 'Dev rejim (lokal test)',
      app: 'Ilova',
      appDesc: 'Kitobxona – PDF kitoblarni o‘qish. Kategoriyalar va kitoblar bosh sahifada va Kitoblar bo‘limida.',
      toHome: 'Bosh sahifaga',
      myAccount: 'Mening hisobim',
      address: 'Manzil',
      offers: 'Takliflar va promolar',
      favorites: 'Sevimlilar',
      orderHistory: 'Buyurtmalar tarixi',
      helpCenter: 'Yordam markazi',
    },
    bookDetail: {
      read: 'O‘qish',
      pages: 'sahifa',
      back: 'Orqaga',
      pageTitle: 'Kitob',
      favorite: 'Sevimlilar',
      addToCart: 'Savatga qo‘shish',
      viewCart: 'Savat',
      about: 'Kitob haqida',
      viewOnGoogleBooks: 'Google Books da ko\'rish',
      viewOnOpenLibrary: 'Open Library da ko\'rish',
      viewOnItBookstore: 'IT Bookstore da ko\'rish',
      viewOnGutendex: 'Gutenberg da o\'qish',
    },
    reader: { pageTitle: 'O‘qish',
      exit: 'Chiqish',
      back: 'Orqaga',
      menuAria: 'Menyu',
      zoomOut: 'Kichiklashtirish',
      zoomIn: 'Kattalashtirish',
      sepia: 'Sepia',
      light: 'Oq',
      dark: 'Qorong‘i',
      amoled: 'AMOLED',
      fitPage: 'Sahifa',
      prevPage: 'Oldingi',
      nextPage: 'Keyingi',
      bookLoading: 'Kitob yuklanmoqda...',
      pdfJsError: 'PDF.js yuklanmadi. Internetingizni tekshiring.',
      pdfError: 'PDF yuklanmadi',
      pageAria: 'Sahifa: chap/o‘ng bosing, suring yoki markazda bosing – panel yashirish',
      retry: 'Qayta urinish',
      fitWidth: 'Eni bo‘yicha',
      translate: 'Tarjima',
      translateHint: 'Matnni tanlang yoki sahifani tarjima qilish tugmasini bosing.',
      translatePage: 'Sahifani tarjima qilish',
      translateCustom: 'Matn kiritish',
      translatePlaceholder: 'Tarjima qilish uchun matnni kiriting yoki qiling.',
      translated: 'Tarjima',
      copy: 'Nusxalash',
      pageNumber: 'Sahifa',
      progressHint: 'O‘qish progressi',
      minLeft: 'daq',
    },
    category: { title: 'Kategoriya', all: 'Barchasi' },
    cart: { title: 'Savatim', empty: 'Mahsulot yo‘q', continueShopping: 'Xaridni davom ettiramiz' },
    common: { loading: 'Yuklanmoqda...', close: 'Yopish', cancel: 'Bekor qilish', save: 'Saqlash' },
  },
  ru: {
    app: { loading: 'Загрузка...', telegramOnly: 'Это приложение работает только через Telegram. Войдите через бота.' },
    layout: { appName: 'Главная' },
    nav: { home: 'Главная', books: 'Книги', library: 'Библиотека', news: 'Новости', profile: 'Профиль', category: 'Категория', cart: 'Корзина', notifications: 'Уведомления', aria: 'Главное меню' },
    banner: {
      heroTitle: 'Новые книги ждут вас',
      heroSub: 'Читайте каждый день – получайте новые знания.',
      promoTitle: 'Читайте без ограничений',
      promoSub: 'Выбирайте из всех категорий бесплатно.',
      newsTitle: 'Последние новости',
      newsSub: 'Обновления и рекомендации библиотеки.',
      ctaBooks: 'Книги',
      ctaRead: 'Начать чтение',
      ctaMore: 'Подробнее',
    },
    news: {
      title: 'Новости',
      latest: 'Последние новости',
      allNews: 'Все новости',
      tagNew: 'Новое',
      tagEvent: 'Событие',
      tagTip: 'Совет',
      tagUpdate: 'Обновление',
      item1Title: 'Добавлены новые категории',
      item1Excerpt: 'Разделы философии, литературы и науки теперь доступны.',
      item1Date: '14.02.2026',
      item2Title: 'Стартовала неделя чтения',
      item2Excerpt: 'Еженедельные подборки книг и награды.',
      item2Date: '12.02.2026',
      item3Title: 'Советы для комфортного чтения дома',
      item3Excerpt: 'Рекомендации по освещению, времени и концентрации.',
      item3Date: '10.02.2026',
      item4Title: 'Обновление приложения – быстрее и удобнее',
      item4Excerpt: 'Новый дизайн и быстрая загрузка.',
      item4Date: '08.02.2026',
      item5Title: 'Раздел аудиокниг скоро',
      item5Excerpt: 'Возможность слушать в дороге уже скоро.',
      item5Date: '05.02.2026',
    },
    home: {
      heroTitle: 'Откройте новые книги',
      heroSub: 'Читайте где угодно, когда угодно.',
      continueReading: 'Продолжить',
      resume: 'Продолжить',
      startReading: 'Начать чтение',
      popularBooks: 'Книги',
      welcomeHint: 'Выберите категорию или',
      booksLink: 'Книги',
      welcomeHint2: 'чтобы увидеть все книги.',
      categories: 'Категории',
      browseCategories: 'Категории',
      recommended: 'Рекомендуем',
      loading: 'Загрузка...',
      error: 'Ошибка',
      noCategories: 'Пока нет категорий. Добавьте в админ-панели.',
      authError: 'Вход не подтверждён. Нажмите «Перейти в библиотеку» в боте снова.',
      noContinueReading: 'Нет прогресса. Выберите книгу.',
      read: 'прочитано',
      specialOffer: 'Специальное предложение',
      topOfWeek: 'Лучшее за неделю',
      bestVendors: 'Лучшие продавцы',
      authors: 'Авторы',
      seeAll: 'Всё',
      search: 'Поиск',
      orderNow: 'Заказать',
      discount20: 'Скидка 20%',
    },
    library: {
      sortRecent: 'Недавние',
      sortAZ: 'А–Я',
      sortProgress: 'Прогресс',
      gridView: 'Сетка',
      listView: 'Список',
      filterAll: 'Все',
      filterReading: 'Читаю',
      filterUnread: 'Не прочитано',
      filterRead: 'Прочитано',
    },
    books: {
      title: 'Книги',
      all: 'Все',
      search: 'Поиск',
      searchPlaceholder: 'Книга или автор...',
      loading: 'Загрузка...',
      error: 'Ошибка',
      noBooks: 'В этом разделе пока нет книг.',
      noResults: 'Ничего не найдено.',
      pages: 'стр.',
      googleBooks: 'Google Books',
      libraryResults: 'В библиотеке',
      googleResults: 'В Google Books',
      searchingGoogle: 'Поиск в Google Books...',
      noResultsGoogle: 'В Google Books не найдено.',
      openLibrary: 'Open Library',
      openLibraryResults: 'В Open Library',
      noResultsOpenLibrary: 'Не найдено.',
      itBookstore: 'IT Bookstore',
      itBookstoreResults: 'В IT Bookstore',
      noResultsItBookstore: 'Не найдено.',
      isbndb: 'ISBNdb',
      isbndbResults: 'В ISBNdb',
      noResultsIsbndb: 'Не найдено.',
      isbndbNeedKey: 'Требуется API ключ.',
      hardcover: 'Hardcover',
      hardcoverResults: 'В Hardcover',
      noResultsHardcover: 'Не найдено.',
      hardcoverNeedKey: 'Требуется API ключ.',
      gutendex: 'Gutendex (Gutenberg)',
      gutendexResults: 'Бесплатные книги Gutenberg',
      noResultsGutendex: 'Не найдено.',
      viewOnSource: 'Открыть в источнике',
    },
    profile: {
      title: 'Профиль',
      settings: 'Настройки',
      language: 'Язык',
      login: 'Вход',
      loginDesc: 'Подтверждено через Telegram. Ваши данные используются только для сохранения прогресса чтения.',
      devMode: 'Режим разработки (локальный тест)',
      app: 'Приложение',
      appDesc: 'Библиотека – чтение PDF. Категории и книги на главной и в разделе «Книги».',
      toHome: 'На главную',
      myAccount: 'Мой аккаунт',
      address: 'Адрес',
      offers: 'Предложения и промо',
      favorites: 'Избранное',
      orderHistory: 'История заказов',
      helpCenter: 'Центр помощи',
    },
    bookDetail: {
      read: 'Читать',
      pages: 'стр.',
      back: 'Назад',
      pageTitle: 'Книга',
      favorite: 'Избранное',
      addToCart: 'В корзину',
      viewCart: 'Корзина',
      about: 'О книге',
      viewOnGoogleBooks: 'Открыть в Google Books',
      viewOnOpenLibrary: 'Открыть в Open Library',
      viewOnItBookstore: 'Открыть в IT Bookstore',
      viewOnGutendex: 'Читать на Gutenberg',
    },
    reader: { pageTitle: 'Чтение',
      exit: 'Выход',
      back: 'Назад',
      menuAria: 'Меню',
      zoomOut: 'Уменьшить',
      zoomIn: 'Увеличить',
      sepia: 'Сепия',
      light: 'Светлая',
      dark: 'Тёмная',
      amoled: 'AMOLED',
      fitPage: 'Страница',
      prevPage: 'Назад',
      nextPage: 'Вперёд',
      bookLoading: 'Загрузка книги...',
      pdfJsError: 'PDF.js не загрузился. Проверьте интернет.',
      pdfError: 'PDF не загружен',
      pageAria: 'Страница: нажмите влево/вправо, свайп или по центру – скрыть панель',
      retry: 'Повторить',
      fitWidth: 'По ширине',
      translate: 'Перевод',
      translateHint: 'Выделите текст или нажмите кнопку перевода страницы.',
      translatePage: 'Перевести страницу',
      translateCustom: 'Ввести текст',
      translatePlaceholder: 'Введите или вставьте текст для перевода.',
      translated: 'Перевод',
      copy: 'Копировать',
      pageNumber: 'Страница',
      progressHint: 'Прогресс чтения',
      minLeft: 'мин',
    },
    category: { title: 'Категория', all: 'Все' },
    cart: { title: 'Моя корзина', empty: 'Нет товаров', continueShopping: 'Продолжить покупки' },
    common: { loading: 'Загрузка...', close: 'Закрыть', cancel: 'Отмена', save: 'Сохранить' },
  },
  en: {
    app: { loading: 'Loading...', telegramOnly: 'This app only works via Telegram. Please open it from the bot.' },
    layout: { appName: 'Home' },
    nav: { home: 'Home', books: 'Books', library: 'Library', news: 'News', profile: 'Profile', category: 'Category', cart: 'Cart', notifications: 'Notifications', aria: 'Main menu' },
    banner: {
      heroTitle: 'New books are waiting for you',
      heroSub: 'Read every day – learn something new.',
      promoTitle: 'Read without limits',
      promoSub: 'Choose from all categories for free.',
      newsTitle: 'Latest news',
      newsSub: 'Library updates and recommendations.',
      ctaBooks: 'Books',
      ctaRead: 'Start reading',
      ctaMore: 'More',
    },
    news: {
      title: 'News',
      latest: 'Latest news',
      allNews: 'All news',
      tagNew: 'New',
      tagEvent: 'Event',
      tagTip: 'Tip',
      tagUpdate: 'Update',
      item1Title: 'New categories added',
      item1Excerpt: 'Philosophy, literature and science sections are now available.',
      item1Date: 'Feb 14, 2026',
      item2Title: 'Reading week has started',
      item2Excerpt: 'Weekly book picks and rewards.',
      item2Date: 'Feb 12, 2026',
      item3Title: 'Tips for comfortable reading at home',
      item3Excerpt: 'Advice on lighting, time and focus.',
      item3Date: 'Feb 10, 2026',
      item4Title: 'App update – faster and easier',
      item4Excerpt: 'New design and quick loading.',
      item4Date: 'Feb 8, 2026',
      item5Title: 'Audiobooks section coming soon',
      item5Excerpt: 'Listen on the go – coming soon.',
      item5Date: 'Feb 5, 2026',
    },
    home: {
      heroTitle: 'Explore new books',
      heroSub: 'Read anytime, anywhere.',
      continueReading: 'Continue Reading',
      resume: 'Resume',
      startReading: 'Start Reading',
      popularBooks: 'Books',
      welcomeHint: 'Choose a category or open',
      booksLink: 'Books',
      welcomeHint2: 'to see all books.',
      categories: 'Categories',
      browseCategories: 'Categories',
      recommended: 'Recommended',
      loading: 'Loading...',
      error: 'Error',
      noCategories: 'No categories yet. Add them in the admin panel.',
      authError: 'Sign-in not verified. Tap «Go to library» in the bot again.',
      noContinueReading: 'No progress yet. Pick a book.',
      read: 'read',
      specialOffer: 'Special Offer',
      topOfWeek: 'Top of Week',
      bestVendors: 'Best Vendors',
      authors: 'Authors',
      seeAll: 'See all',
      search: 'Search',
      orderNow: 'Order Now',
      discount20: 'Discount 20%',
    },
    library: {
      sortRecent: 'Recent',
      sortAZ: 'A–Z',
      sortProgress: 'Progress',
      gridView: 'Grid',
      listView: 'List',
      filterAll: 'All',
      filterReading: 'Reading',
      filterUnread: 'Unread',
      filterRead: 'Read',
    },
    books: {
      title: 'Books',
      all: 'All',
      search: 'Search',
      searchPlaceholder: 'Book or author...',
      loading: 'Loading...',
      error: 'Error',
      noBooks: 'No books in this section yet.',
      noResults: 'No results found.',
      pages: 'p.',
      googleBooks: 'Google Books',
      libraryResults: 'In library',
      googleResults: 'On Google Books',
      searchingGoogle: 'Searching Google Books...',
      noResultsGoogle: 'Not found on Google Books.',
      openLibrary: 'Open Library',
      openLibraryResults: 'On Open Library',
      noResultsOpenLibrary: 'Not found.',
      itBookstore: 'IT Bookstore',
      itBookstoreResults: 'On IT Bookstore',
      noResultsItBookstore: 'Not found.',
      isbndb: 'ISBNdb',
      isbndbResults: 'On ISBNdb',
      noResultsIsbndb: 'Not found.',
      isbndbNeedKey: 'API key required.',
      hardcover: 'Hardcover',
      hardcoverResults: 'On Hardcover',
      noResultsHardcover: 'Not found.',
      hardcoverNeedKey: 'API key required.',
      gutendex: 'Gutendex (Gutenberg)',
      gutendexResults: 'Free Gutenberg books',
      noResultsGutendex: 'Not found.',
      viewOnSource: 'View on source',
    },
    profile: {
      title: 'Profile',
      settings: 'Settings',
      language: 'Language',
      login: 'Sign in',
      loginDesc: 'Verified via Telegram. Your data is only used to save reading progress.',
      devMode: 'Dev mode (local test)',
      app: 'App',
      appDesc: 'Library – read PDF books. Categories and books on Home and in Books.',
      toHome: 'To Home',
      myAccount: 'My Account',
      address: 'Address',
      offers: 'Offers & Promos',
      favorites: 'Your Favorites',
      orderHistory: 'Order History',
      helpCenter: 'Help Center',
    },
    bookDetail: {
      read: 'Read',
      pages: 'p.',
      back: 'Back',
      pageTitle: 'Book',
      favorite: 'Favorite',
      addToCart: 'Add to Cart',
      viewCart: 'View Cart',
      about: 'About this book',
      viewOnGoogleBooks: 'View on Google Books',
      viewOnOpenLibrary: 'View on Open Library',
      viewOnItBookstore: 'View on IT Bookstore',
      viewOnGutendex: 'Read on Gutenberg',
    },
    reader: { pageTitle: 'Reader',
      exit: 'Exit',
      back: 'Back',
      menuAria: 'Menu',
      zoomOut: 'Zoom out',
      zoomIn: 'Zoom in',
      sepia: 'Sepia',
      light: 'Light',
      dark: 'Dark',
      amoled: 'AMOLED',
      fitPage: 'Fit page',
      prevPage: 'Prev',
      nextPage: 'Next',
      bookLoading: 'Loading book...',
      pdfJsError: 'PDF.js failed to load. Check your connection.',
      pdfError: 'PDF failed to load',
      pageAria: 'Page: tap left/right, swipe, or center to toggle panel',
      retry: 'Retry',
      fitWidth: 'Fit width',
      translate: 'Translate',
      translateHint: 'Select text or use the translate page button.',
      translatePage: 'Translate page',
      translateCustom: 'Enter text',
      translatePlaceholder: 'Enter or paste text to translate.',
      translated: 'Translation',
      copy: 'Copy',
      pageNumber: 'Page',
      progressHint: 'Reading progress',
      minLeft: 'min',
    },
    category: { title: 'Category', all: 'All' },
    cart: { title: 'My Cart', empty: 'There is no products', continueShopping: 'Continue shopping' },
    common: { loading: 'Loading...', close: 'Close', cancel: 'Cancel', save: 'Save' },
  },
};

export function getT(lang) {
  const dict = translations[lang] || translations.uz;
  return (key) => {
    const parts = key.split('.');
    let v = dict;
    for (const p of parts) {
      v = v?.[p];
      if (v === undefined) return key;
    }
    return typeof v === 'string' ? v : key;
  };
}
